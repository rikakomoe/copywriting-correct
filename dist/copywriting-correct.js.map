{"version":3,"sources":["webpack://copywriting-correct/webpack/universalModuleDefinition","webpack://copywriting-correct/webpack/bootstrap","webpack://copywriting-correct/./src/correctors/CharacterCorrector.ts","webpack://copywriting-correct/./src/utils.ts","webpack://copywriting-correct/./src/correctors/ProperNounsCorrector.ts","webpack://copywriting-correct/./src/correctors/SpaceCorrector.ts","webpack://copywriting-correct/./src/correctors/UnitOfMeasurementCorrector.ts","webpack://copywriting-correct/./src/index.ts","webpack://copywriting-correct/webpack:///webpack/universalModuleDefinition","webpack://copywriting-correct/webpack:/webpack/bootstrap 68fe453258b649e9baf0","webpack://copywriting-correct/webpack:///src/browser/pangu.js","webpack://copywriting-correct/webpack:///src/shared/core.js","webpack://copywriting-correct/./src/CopyWritingCorrectService.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","utils_1","CharacterCorrector","handle","text","replace","RegExp","keys","fullWidthChars","join","$","zhSymbols","dotMarks","$1","$2","labelMarks","rules","default","０","１","２","３","４","５","６","７","８","９","Ａ","Ｂ","Ｃ","Ｄ","Ｅ","Ｆ","Ｇ","Ｈ","Ｉ","Ｊ","Ｋ","Ｌ","Ｍ","Ｎ","Ｏ","Ｐ","Ｑ","Ｒ","Ｓ","Ｔ","Ｕ","Ｖ","Ｗ","Ｘ","Ｙ","Ｚ","ａ","ｂ","ｃ","ｄ","ｅ","ｆ","ｇ","ｈ","ｉ","ｊ","ｋ","ｌ","ｍ","ｎ","ｏ","ｐ","ｑ","ｒ","ｓ","ｔ","ｕ","ｖ","ｗ","ｘ","ｙ","ｚ","－"," ","／","％","＃","＠","＆","＜","＞","［","］","｛","｝","＼","｜","＋","＝","＿","＾","￣","｀","!","?",".",",",":",";","(",")","properNouns","ruby","mri","rails","gem","rubygems","rubyonrails","ror","rubyconf","railsconf","rubytuesday","coffeescript","scss","sass","railscasts","execjs","cocoapods","rack","sinatra","grape","unicorn","capistrano","puppet","vagrant","chef","passenger","nodejs","npm","php","pear","laravel","lumen","laravel4","laravel5","traits","composer","homestead","ioc","phpspec","codeception","thinkphp","afnetworking","reactivecocoa","three20","ssh","web","api","css","html","json","jsonp","xml","yaml","yml","ini","csv","soap","ajax","messagepack","javascript","js","png","dsl","tdd","bdd","cgi","asp.net",".net","rest","orm","oauth","oauth2","i18n","markdown","amazon","aws","facebook","github","gist","ruby_china","ruby-china","rubychina","phphub","v2ex","hackernews","heroku","stackoverflow","stackexchange","twitter","youtube","slack","laracasts","dynamodb","mysql","postgresql","sqlite","memcached","mongodb","redis","rethinkdb","elasticsearch","solr","sphinx","windows","linux","mac","osx","ubuntu","rhel","centos","archlinux","redhat","android","ios","gitlab","gitlabci","fontawesome","bootstrap","less","jquery","requirejs","underscore","angularjs","emberjs","backbone","seajs","imagemagick","fluentd","ffmpeg","wordpress","drupal","joomla","piwik","discuz","git","svn","vim","emacs","textmate","sublime","rubymine","sequelpro","virtualbox","safari","chrome","ie","firefox","dash","termal","iterm","iterm2","iwork","itunes","iphoto","ibook","imessage","tweetbot","sparrow","photoshop","office","word","excel","powerpoint","app","iphone","ipad","imac","macbookpro","macbook","rmbp","wi-fi","wifi","vps","vpn","arm","cpu","pdf","ProperNounsCorrector","match","pangu","SpaceCorrector","spacing","trim","UnitOfMeasurementCorrector","CharacterCorrector_1","ProperNounsCorrector_1","SpaceCorrector_1","UnitOfMeasurementCorrector_1","CopyWritingCorrectService_1","CopyWritingCorrectService","id","loaded","Pangu","BrowserPangu","_classCallCheck","this","_this","_possibleConstructorReturn","getPrototypeOf","topTags","ignoreTags","spaceSensitiveTags","spaceLikeTags","blockTags","node","parentNode","nodeName","search","isContentEditable","getAttribute","targetNode","childNodes","length","childNode","nodeType","textContent","xPathQuery","contextNode","textNodes","document","evaluate","XPathResult","ORDERED_NODE_SNAPSHOT_TYPE","currentTextNode","nextTextNode","snapshotLength","snapshotItem","canIgnoreNode","newText","data","nextSibling","testText","toString","substr","nextNode","isFirstTextChild","currentNode","isLastTextChild","previousSibling","panguSpace","createElement","innerHTML","insertBefore","previousElementSibling","removeChild","spacingNodeByXPath","idName","className","tagName","_arr","_i","spacingPageTitle","spacingPageBody","cjkQuote","quoteCJK","fixQuote","fixSingleQuote","hashANSCJKhash","cjkHash","hashCJK","cjkOperatorANS","ansOperatorCJK","cjkBracketCJK","cjkBracket","bracketCJK","fixBracket","fixSymbol","cjkANS","ansCJK","oldText","tmpText","callback","arguments","undefined","err","corrects","addCorrectors","correctors","concat","resetCorrectors","correct","_a","corrector","correctorRules","rule"],"mappings":"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","file":"copywriting-correct.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"copywriting-correct\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"copywriting-correct\"] = factory();\n\telse\n\t\troot[\"copywriting-correct\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","// 修正字符\n\nimport { dotMarks, fullWidthChars, labelMarks, zhSymbols } from '../utils';\n\nexport class CharacterCorrector {\n  public static rules = ['character'];\n\n  public static handle(text: string): string {\n\n    //  把数字和英文、部分标点符号等全角字符转换为半角字符\n    text = text.replace(new RegExp(`[${Object.keys(fullWidthChars).join('')}]`, 'g'),\n      $ =>\n        fullWidthChars[$]\n    );\n\n    // 中文字符后面使用中文省略号\n    text = text.replace(\n      /([\\u4e00-\\u9fa5])[\\.。]{2,}/g,\n      '$1……'\n    );\n\n    // 中文字符后面全部使用中文点号\n    text = text.replace(\n      new RegExp(`([\\u4e00-\\u9fa5${zhSymbols.join('')}])([${Object.keys(dotMarks).join('')}])`, 'g'),\n      ($, $1, $2) =>\n        $1 + dotMarks[$2]\n    );\n\n    // 两侧有中文字符的标号使用中文标号\n    text = text.replace(\n      new RegExp(`([${Object.keys(labelMarks).join('')}])([\\u4e00-\\u9fa5])`, 'g'),\n      ($, $1, $2) =>\n        labelMarks[$1] + $2\n    );\n    text = text.replace(\n      new RegExp(`([\\u4e00-\\u9fa5])([${Object.keys(labelMarks).join('')}])`, 'g'),\n      ($, $1, $2) =>\n        $1 + labelMarks[$2]\n    );\n\n    // 去除重复标点\n    text = text.replace(/([！？])([！？]*)/g, '$1');\n\n    return text;\n\n  }\n}\n\nexport default CharacterCorrector;\n","export const fullWidthChars: any = {\n  '０': '0', '１': '1', '２': '2', '３': '3', '４': '4',\n  '５': '5', '６': '6', '７': '7', '８': '8', '９': '9',\n  Ａ: 'A', Ｂ: 'B', Ｃ: 'C', Ｄ: 'D', Ｅ: 'E',\n  Ｆ: 'F', Ｇ: 'G', Ｈ: 'H', Ｉ: 'I', Ｊ: 'J',\n  Ｋ: 'K', Ｌ: 'L', Ｍ: 'M', Ｎ: 'N', Ｏ: 'O',\n  Ｐ: 'P', Ｑ: 'Q', Ｒ: 'R', Ｓ: 'S', Ｔ: 'T',\n  Ｕ: 'U', Ｖ: 'V', Ｗ: 'W', Ｘ: 'X', Ｙ: 'Y',\n  Ｚ: 'Z', ａ: 'a', ｂ: 'b', ｃ: 'c', ｄ: 'd',\n  ｅ: 'e', ｆ: 'f', ｇ: 'g', ｈ: 'h', ｉ: 'i',\n  ｊ: 'j', ｋ: 'k', ｌ: 'l', ｍ: 'm', ｎ: 'n',\n  ｏ: 'o', ｐ: 'p', ｑ: 'q', ｒ: 'r', ｓ: 's',\n  ｔ: 't', ｕ: 'u', ｖ: 'v', ｗ: 'w', ｘ: 'x',\n  ｙ: 'y', ｚ: 'z', '－': '-', ' ': ' ', '／': '/',\n  '％': '%', '＃': '#', '＠': '@', '＆': '&', '＜': '<',\n  '＞': '>', '［': '[', '］': ']', '｛': '{', '｝': '}',\n  '＼': '\\\\', '｜': '|', '＋': '+', '＝': '=', '＿': '_',\n  '＾': '^', '￣': '~', '｀': '`',\n};\n\nexport const dotMarks: any = {\n  '!': '！',\n  '?': '？',\n  '.': '。',\n  ',': '，',\n  ':': '：',\n  ';': '；',\n};\n\nexport const labelMarks: any = {\n  '(': '（',\n  ')': '）',\n};\n\nexport const zhSymbols = [\n  '。', '？', '！', '，',\n  '、', '；', '：', '「',\n  '」', '『', '』', '‘',\n  '’', '“', '”', '（',\n  '）', '〔', '〕', '【',\n  '】', '…', '–', '—',\n  '．', '《', '》', '〈', '〉',\n];\n","const properNouns: any = {\n  // Ruby\n  ruby: 'Ruby',\n  mri: 'MRI',\n  rails: 'Rails',\n  gem: 'Gem',\n  rubygems: 'RubyGems',\n  rubyonrails: 'Ruby on Rails',\n  ror: 'Ruby on Rails',\n  rubyconf: 'RubyConf',\n  railsconf: 'RailsConf',\n  rubytuesday: 'Ruby Tuesday',\n\n  coffeescript: 'CoffeeScript',\n  scss: 'SCSS',\n  sass: 'Sass',\n  railscasts: 'RailsCasts',\n  execjs: 'ExecJS',\n  cocoapods: 'CocoaPods',\n  rack: 'Rack',\n  sinatra: 'Sinatra',\n  grape: 'Grape',\n  unicorn: 'Unicorn',\n  capistrano: 'Capistrano',\n  puppet: 'Puppet',\n  vagrant: 'Vagrant',\n  chef: 'Chef',\n  passenger: 'Passenger',\n\n  // 'capybara'      : 'Capybara',\n  // 'lotus'         : 'Lotus',\n  // 'mina'          : 'Mina',\n  // 'rubymotion'    : 'RubyMotion',\n  // 'irb'           : 'IRB',\n  // 'pry'           : 'Pry',\n  // 'jruby'         : 'JRuby',\n  // 'mruby'         : 'mRuby',\n  // 'rvm'           : 'RVM',\n  // 'rbenv'         : 'rbenv',\n  // 'yard'          : 'YARD',\n  // 'rdoc'          : 'RDoc',\n  // 'rspec'         : 'RSpec',\n  // 'minitest'      : 'MiniTest',\n  // 'thin'          : 'Thin',\n  // 'puma'          : 'Puma',\n  // 'activerecord'  : 'ActiveRecord',\n  // 'active-record' : 'ActiveRecord',\n  // 'activemodal'   : 'ActiveModel',\n  // 'activesupport' : 'ActiveSupport',\n  // 'datamapper'    : 'DataMapper',\n  // 'devise'        : 'Devise',\n  // 'cancancan'     : 'CanCanCan',\n  // 'resque'        : 'Resque',\n  // 'sidekiq'       : 'Sidekiq',\n  // 'turbolinks'    : 'Turbolinks',\n  // 'sprockets'     : 'Sprockets',\n  // 'redcarpet'     : 'Redcarpet',\n  // 'sunspot'       : 'Sunspot',\n  // 'carrierwave'   : 'CarrierWave',\n  // 'paperclip'     : 'PaperClip',\n  // 'simpleform'    : 'Simple Form',\n  // 'kaminari'      : 'Kaminari',\n  // 'will_paginate' : 'will_paginate',\n  // 'minimagick'    : 'MiniMagick',\n  // 'rmagick'       : 'RMagick',\n  // 'nokogiri'      : 'Nokogiri',\n  // 'god'           : 'God',\n  // 'eventmachine'  : 'EventMachine',\n  // 'simplecov'     : 'SimpleCov',\n  // 'brakeman'      : 'Brakeman',\n  // 'activeadmin'   : 'ActiveAdmin',\n  // 'railsadmin'    : 'RailsAdmin',\n\n  // Python\n\n  // Node.js\n  nodejs: 'Node.js',\n  npm: 'NPM',\n\n  // Go\n\n  // PHP\n  php: 'PHP',\n  pear: 'Pear',\n  laravel: 'Laravel',\n  lumen: 'Lumen',\n  laravel4: 'Laravel 4',\n  laravel5: 'Laravel 5',\n  traits: 'Traits',\n  composer: 'Composer',\n  homestead: 'Homestead',\n  ioc: 'IoC',\n  phpspec: 'PHPSpec',\n  codeception: 'Codeception',\n  thinkphp: 'ThinkPHP',\n\n  // Cocoa\n  afnetworking: 'AFNetworking',\n  reactivecocoa: 'ReactiveCocoa',\n  three20: 'Three20',\n\n  // Java\n\n  // Programming\n  ssh: 'SSH',\n  web: 'Web',\n  api: 'API',\n  css: 'CSS',\n  html: 'HTML',\n  json: 'JSON',\n  jsonp: 'JSONP',\n  xml: 'xml',\n  yaml: 'YAML',\n  yml: 'YAML',\n  ini: 'INI',\n  csv: 'CSV',\n  soap: 'SOAP',\n  ajax: 'Ajax',\n  messagepack: 'MessagePack',\n  javascript: 'JavaScript',\n  js: 'JS',\n  png: 'PNG',\n  dsl: 'DSL',\n  tdd: 'TDD',\n  bdd: 'BDD',\n  cgi: 'CGI',\n  'asp.net': 'ASP.NET',\n  '.net': '.NET',\n  rest: 'REST',\n  orm: 'ORM',\n  oauth: 'OAuth',\n  oauth2: 'OAuth2',\n  i18n: 'I18N',\n  markdown: 'Markdown',\n\n  // Sites\n  amazon: 'Amazon',\n  aws: 'AWS',\n  facebook: 'Facebook',\n  github: 'GitHub',\n  gist: 'Gist',\n  ruby_china: 'Ruby China',\n  'ruby-china': 'Ruby China',\n  rubychina: 'Ruby China',\n  phphub: 'PHPHub',\n  v2ex: 'V2EX',\n  hackernews: 'Hacker News',\n  heroku: 'Heroku',\n  stackoverflow: 'Stack Overflow',\n  stackexchange: 'StackExchange',\n  twitter: 'Twitter',\n  youtube: 'YouTube',\n  slack: 'Slack',\n  laracasts: 'Laracasts',\n\n  // Databases\n  dynamodb: 'DynamoDB',\n  mysql: 'MySQL',\n  postgresql: 'PostgreSQL',\n  sqlite: 'SQLite',\n  memcached: 'Memcached',\n  mongodb: 'MongoDB',\n  redis: 'Redis',\n  rethinkdb: 'RethinkDB',\n  elasticsearch: 'Elasticsearch',\n  solr: 'Solr',\n  sphinx: 'Sphinx',\n\n  // System\n  window: 'Windows',\n  windows: 'Windows',\n  linux: 'Linux',\n  mac: 'Mac',\n  osx: 'OS X',\n  ubuntu: 'Ubuntu',\n  rhel: 'RHEL',\n  centos: 'CentOS',\n  archlinux: 'Arch Linux',\n  redhat: 'RedHat',\n  android: 'Android',\n  ios: 'iOS',\n\n  // OpenSource Projects\n  gitlab: 'GitLab',\n  gitlabci: 'GitLab CI',\n  fontawesome: 'Font Awesome',\n  bootstrap: 'Bootstrap',\n  less: 'Less',\n  jquery: 'jQuery',\n  requirejs: 'RequireJS',\n  underscore: 'Underscore',\n  angularjs: 'AngularJS',\n  emberjs: 'Ember.js',\n  backbone: 'Backbone',\n  seajs: 'SeaJS',\n  imagemagick: 'ImageMagick',\n  fluentd: 'Fluentd',\n  ffmpeg: 'FFmpeg',\n  wordpress: 'WordPress',\n  drupal: 'Drupal',\n  joomla: 'Joomla',\n  piwik: 'Piwik',\n  discuz: 'Discuz!',\n\n  // Tools\n  git: 'Git',\n  svn: 'SVN',\n  vim: 'VIM',\n  emacs: 'Emacs',\n  textmate: 'TextMate',\n  sublime: 'Sublime',\n  rubymine: 'RubyMine',\n  sequelpro: 'Sequel Pro',\n  virtualbox: 'VirtualBox',\n  safari: 'Safari',\n  chrome: 'Chrome',\n  ie: 'IE',\n  firefox: 'Firefox',\n  dash: 'Dash',\n  termal: 'Termal',\n  iterm: 'iTerm',\n  iterm2: 'iTerm2',\n  iwork: 'iWork',\n  itunes: 'iTunes',\n  iphoto: 'iPhoto',\n  ibook: 'iBook',\n  imessage: 'iMessage',\n  tweetbot: 'TweetBot',\n  sparrow: 'Sparrow',\n  photoshop: 'Photoshop',\n  office: 'Office',\n  word: 'Word',\n  excel: 'Excel',\n  powerpoint: 'PowerPoint',\n\n  // Misc\n  app: 'App',\n  iphone: 'iPhone',\n  ipad: 'iPad',\n  imac: 'iMac',\n  macbookpro: 'MacBook Pro',\n  macbook: 'MacBook',\n  rmbp: 'rMBP',\n  'wi-fi': 'Wi-Fi',\n  wifi: 'Wi-Fi',\n  vps: 'VPS',\n  vpn: 'VPN',\n  arm: 'ARM',\n  cpu: 'CPU',\n  pdf: 'PDF',\n};\n\n// 纠正专有名词\nexport class ProperNounsCorrector {\n  public static rules = ['properNouns'];\n\n  public static handle(text: string): string {\n\n    for (const i in properNouns) {\n      if (properNouns.hasOwnProperty(i)) {\n        text = text.replace(\n          /\\w+/g,\n          $ => $.match(new RegExp(`^${i}$`, 'i')) ? properNouns[i] : $\n        );\n      }\n    }\n\n    return text;\n  }\n}\n\nexport default ProperNounsCorrector;\n","import * as pangu from 'pangu';\n\nimport { zhSymbols } from '../utils';\n\n// 修正空格\nexport class SpaceCorrector {\n  public static rules = ['space'];\n\n  public static handle(text: string): string {\n\n    // 盘古空格（中文与英文、中文与数字）\n    text = pangu.spacing(text);\n\n    // 全角符号前后去空格\n    text = text.replace(\n      new RegExp(`([ ]*)([${zhSymbols.join('')}])([ ]*)`, 'g'),\n      '$2'\n    );\n\n    return text.trim();\n  }\n}\n\nexport default SpaceCorrector;\n","// 计量单位\nexport class UnitOfMeasurementCorrector {\n  public static rules = ['unitOfMeasurement'];\n\n  public static handle(text: string): string {\n\n    // 数字+英文 中间加空格\n    text = text.replace(\n      /([0-9])([A-Za-z])/g,\n      '$1 $2'\n    );\n\n    // 数字+%° 中间不加空格\n    text = text.replace(\n      /([0-9])([ ]*)([%°])/g,\n      '$1$3'\n    );\n\n    return text;\n  }\n}\n\nexport default UnitOfMeasurementCorrector;\n","import CharacterCorrector from './correctors/CharacterCorrector';\nimport ICorrector from './correctors/Interfaces/ICorrector';\nimport ProperNounsCorrector from './correctors/ProperNounsCorrector';\nimport SpaceCorrector from './correctors/SpaceCorrector';\nimport UnitOfMeasurementCorrector from './correctors/UnitOfMeasurementCorrector';\n\nexport { CopyWritingCorrectService as default } from './CopyWritingCorrectService';\nexport {\n  CharacterCorrector,\n  SpaceCorrector,\n  ProperNounsCorrector,\n  UnitOfMeasurementCorrector\n};\nexport { ICorrector };\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"pangu\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pangu\"] = factory();\n\telse\n\t\troot[\"pangu\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 68fe453258b649e9baf0\n **/","const Pangu = require('../shared/core').Pangu;\n\n// https://developer.mozilla.org/en/docs/Web/API/Node/nodeType\nconst COMMENT_NODE_TYPE = 8;\n\nclass BrowserPangu extends Pangu {\n\n  constructor() {\n    super();\n\n    this.topTags = /^(html|head|body|#document)$/i;\n    this.ignoreTags = /^(script|code|pre|textarea)$/i;\n    this.spaceSensitiveTags = /^(a|del|pre|s|strike|u)$/i;\n    this.spaceLikeTags = /^(br|hr|i|img|pangu)$/i;\n    this.blockTags = /^(div|h1|h2|h3|h4|h5|h6|p)$/i;\n\n    // TODO\n    // this.ignoreClasses\n    // this.ignoreAttributes\n  }\n\n  canIgnoreNode(node) {\n    let parentNode = node.parentNode;\n\n    while (parentNode && parentNode.nodeName && parentNode.nodeName.search(this.topTags) === -1) {\n      if ((parentNode.nodeName.search(this.ignoreTags) >= 0) || (parentNode.isContentEditable) || (parentNode.getAttribute('g_editable') === 'true')) {\n        return true;\n      }\n\n      parentNode = parentNode.parentNode;\n    }\n\n    return false;\n  }\n\n  isFirstTextChild(parentNode, targetNode) {\n    const childNodes = parentNode.childNodes;\n\n    // 只判斷第一個含有 text 的 node\n    for (let i = 0; i < childNodes.length; i++) {\n      const childNode = childNodes[i];\n      if (childNode.nodeType !== COMMENT_NODE_TYPE && childNode.textContent) {\n        return childNode === targetNode;\n      }\n    }\n\n    return false;\n  }\n\n  isLastTextChild(parentNode, targetNode) {\n    const childNodes = parentNode.childNodes;\n\n    // 只判斷倒數第一個含有 text 的 node\n    for (let i = childNodes.length - 1; i > -1; i--) {\n      const childNode = childNodes[i];\n      if (childNode.nodeType !== COMMENT_NODE_TYPE && childNode.textContent) {\n        return childNode === targetNode;\n      }\n    }\n\n    return false;\n  }\n\n  spacingNodeByXPath(xPathQuery, contextNode) {\n    // 因為 xPathQuery 會是用 text() 結尾，所以這些 nodes 會是 text 而不是 DOM element\n    // snapshotLength 要配合 XPathResult.ORDERED_NODE_SNAPSHOT_TYPE 使用\n    // https://developer.mozilla.org/en-US/docs/DOM/document.evaluate\n    // https://developer.mozilla.org/en-US/docs/Web/API/XPathResult\n    const textNodes = document.evaluate(xPathQuery, contextNode, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);\n\n    let currentTextNode;\n    let nextTextNode;\n\n    // 從最下面、最裡面的節點開始，所以是倒序的\n    for (let i = textNodes.snapshotLength - 1; i > -1; --i) {\n      currentTextNode = textNodes.snapshotItem(i);\n\n      if (this.canIgnoreNode(currentTextNode)) {\n        nextTextNode = currentTextNode;\n        continue;\n      }\n\n      const newText = this.spacing(currentTextNode.data);\n      if (currentTextNode.data !== newText) {\n        currentTextNode.data = newText;\n      }\n\n      // 處理嵌套的 <tag> 中的文字\n      if (nextTextNode) {\n        // TODO\n        // 現在只是簡單地判斷相鄰的下一個 node 是不是 <br>\n        // 萬一遇上嵌套的標籤就不行了\n        if (currentTextNode.nextSibling && currentTextNode.nextSibling.nodeName.search(this.spaceLikeTags) >= 0) {\n          nextTextNode = currentTextNode;\n          continue;\n        }\n\n        // currentTextNode 的最後一個字 + nextTextNode 的第一個字\n        const testText = currentTextNode.data.toString().substr(-1) + nextTextNode.data.toString().substr(0, 1);\n        const testNewText = this.spacing(testText);\n        if (testNewText !== testText) {\n          // 往上找 nextTextNode 的 parent node\n          // 直到遇到 spaceSensitiveTags\n          // 而且 nextTextNode 必須是第一個 text child\n          // 才能把空格加在 nextTextNode 的前面\n          let nextNode = nextTextNode;\n          while (nextNode.parentNode && nextNode.nodeName.search(this.spaceSensitiveTags) === -1 && this.isFirstTextChild(nextNode.parentNode, nextNode)) {\n            nextNode = nextNode.parentNode;\n          }\n\n          let currentNode = currentTextNode;\n          while (currentNode.parentNode && currentNode.nodeName.search(this.spaceSensitiveTags) === -1 && this.isLastTextChild(currentNode.parentNode, currentNode)) {\n            currentNode = currentNode.parentNode;\n          }\n\n          if (currentNode.nextSibling) {\n            if (currentNode.nextSibling.nodeName.search(this.spaceLikeTags) >= 0) {\n              nextTextNode = currentTextNode;\n              continue;\n            }\n          }\n\n          if (currentNode.nodeName.search(this.blockTags) === -1) {\n            if (nextNode.nodeName.search(this.spaceSensitiveTags) === -1) {\n              if ((nextNode.nodeName.search(this.ignoreTags) === -1) && (nextNode.nodeName.search(this.blockTags) === -1)) {\n                if (nextTextNode.previousSibling) {\n                  if (nextTextNode.previousSibling.nodeName.search(this.spaceLikeTags) === -1) {\n                    nextTextNode.data = ` ${nextTextNode.data}`;\n                  }\n                } else {\n                  // dirty hack\n                  if (!this.canIgnoreNode(nextTextNode)) {\n                    nextTextNode.data = ` ${nextTextNode.data}`;\n                  }\n                }\n              }\n            } else if (currentNode.nodeName.search(this.spaceSensitiveTags) === -1) {\n              currentTextNode.data = `${currentTextNode.data} `;\n            } else {\n              const panguSpace = document.createElement('pangu');\n              panguSpace.innerHTML = ' ';\n\n              // 避免一直被加空格\n              if (nextNode.previousSibling) {\n                if (nextNode.previousSibling.nodeName.search(this.spaceLikeTags) === -1) {\n                  nextNode.parentNode.insertBefore(panguSpace, nextNode);\n                }\n              } else {\n                nextNode.parentNode.insertBefore(panguSpace, nextNode);\n              }\n\n              // TODO\n              // 主要是想要避免在元素（通常都是 <li>）的開頭加空格\n              // 這個做法有點蠢，但是不管還是先硬上\n              if (!panguSpace.previousElementSibling) {\n                if (panguSpace.parentNode) {\n                  panguSpace.parentNode.removeChild(panguSpace);\n                }\n              }\n            }\n          }\n        }\n      }\n\n      nextTextNode = currentTextNode;\n    }\n  }\n\n  spacingNode(contextNode) {\n    const xPathQuery = './/*/text()[normalize-space(.)]';\n    this.spacingNodeByXPath(xPathQuery, contextNode);\n  }\n\n  spacingElementById(idName) {\n    const xPathQuery = `id(\"${idName}\")//text()`;\n    this.spacingNodeByXPath(xPathQuery, document);\n  }\n\n  spacingElementByClassName(className) {\n    const xPathQuery = `//*[contains(concat(\" \", normalize-space(@class), \" \"), \"${className}\")]//text()`;\n    this.spacingNodeByXPath(xPathQuery, document);\n  }\n\n  spacingElementByTagName(tagName) {\n    const xPathQuery = `//${tagName}//text()`;\n    this.spacingNodeByXPath(xPathQuery, document);\n  }\n\n  spacingPageTitle() {\n    const xPathQuery = '/html/head/title/text()';\n    this.spacingNodeByXPath(xPathQuery, document);\n  }\n\n  spacingPageBody() {\n    // // >> 任意位置的節點\n    // . >> 當前節點\n    // .. >> 父節點\n    // [] >> 條件\n    // text() >> 節點的文字內容，例如 hello 之於 <tag>hello</tag>\n    //\n    // [@contenteditable]\n    // 帶有 contenteditable 屬性的節點\n    //\n    // normalize-space(.)\n    // 當前節點的頭尾的空白字元都會被移除，大於兩個以上的空白字元會被置換成單一空白\n    // https://developer.mozilla.org/en-US/docs/XPath/Functions/normalize-space\n    //\n    // name(..)\n    // 父節點的名稱\n    // https://developer.mozilla.org/en-US/docs/XPath/Functions/name\n    //\n    // translate(string, \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\", \"abcdefghijklmnopqrstuvwxyz\")\n    // 將 string 轉換成小寫，因為 XML 是 case-sensitive 的\n    // https://developer.mozilla.org/en-US/docs/XPath/Functions/translate\n    //\n    // 1. 處理 <title>\n    // 2. 處理 <body> 底下的節點\n    // 3. 略過 contentEditable 的節點\n    // 4. 略過特定節點，例如 <script> 和 <style>\n    //\n    // 注意，以下的 query 只會取出各節點的 text 內容！\n    let xPathQuery = '/html/body//*/text()[normalize-space(.)]';\n    for (const tag of ['script', 'style', 'textarea']) {\n      // 理論上這幾個 tag 裡面不會包含其他 tag\n      // 所以可以直接用 .. 取父節點\n      // ex: [translate(name(..), \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\", \"abcdefghijklmnopqrstuvwxyz\") != \"script\"]\n      xPathQuery += `[translate(name(..),\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\",\"abcdefghijklmnopqrstuvwxyz\")!=\"${tag}\"]`;\n    }\n    this.spacingNodeByXPath(xPathQuery, document);\n  }\n\n  // TODO: 支援 callback 和 promise\n  spacingPage() {\n    this.spacingPageTitle();\n    this.spacingPageBody();\n  }\n\n}\n\nconst pangu = new BrowserPangu();\n\nexports = module.exports = pangu;\nexports.Pangu = BrowserPangu;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/browser/pangu.js\n **/","// CJK is short for Chinese, Japanese and Korean.\n//\n// The constant cjk contains following Unicode blocks:\n// \t\\u2e80-\\u2eff CJK Radicals Supplement\n// \t\\u2f00-\\u2fdf Kangxi Radicals\n// \t\\u3040-\\u309f Hiragana\n// \t\\u30a0-\\u30ff Katakana\n// \t\\u3100-\\u312f Bopomofo\n// \t\\u3200-\\u32ff Enclosed CJK Letters and Months\n// \t\\u3400-\\u4dbf CJK Unified Ideographs Extension A\n// \t\\u4e00-\\u9fff CJK Unified Ideographs\n// \t\\uf900-\\ufaff CJK Compatibility Ideographs\n//\n// For more information about Unicode blocks, see\n// \thttp://unicode-table.com/en/\n//  https://github.com/vinta/pangu\n\n// ANS is short for Alphabets, Numbers and Symbols (`~!@#$%^&*()-_=+[]{}\\|;:'\",<.>/?).\n//\n// CAUTION: those ANS in following constants do not contain all symbols above.\n\n// cjkQuote >> 跟 Go 版差了一個 '\n// quoteCJK >> 跟 Go 版差了一個 '\nconst cjkQuote = /([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])([\"])/g;\nconst quoteCJK = /([\"])([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])/g;\nconst fixQuote = /([\"']+)(\\s*)(.+?)(\\s*)([\"']+)/g;\nconst fixSingleQuote = /([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])( )(')([A-Za-z])/g;\n\nconst hashANSCJKhash = /([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])(#)([A-Za-z0-9\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff]+)(#)([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])/g;\nconst cjkHash = /([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])(#([^ ]))/g;\nconst hashCJK = /(([^ ])#)([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])/g;\n\nconst cjkOperatorANS = /([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])([\\+\\-\\*\\/=&\\\\|<>])([A-Za-z0-9])/g;\nconst ansOperatorCJK = /([A-Za-z0-9])([\\+\\-\\*\\/=&\\\\|<>])([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])/g;\n\nconst cjkBracketCJK = /([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])([\\(\\[\\{<\\u201c]+(.*?)[\\)\\]\\}>\\u201d]+)([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])/g;\nconst cjkBracket = /([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])([\\(\\[\\{<\\u201c>])/g;\nconst bracketCJK = /([\\)\\]\\}>\\u201d<])([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])/g;\nconst fixBracket = /([\\(\\[\\{<\\u201c]+)(\\s*)(.+?)(\\s*)([\\)\\]\\}>\\u201d]+)/;\n\nconst fixSymbol = /([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])([~!;:,\\.\\?\\u2026])([A-Za-z0-9])/g;\n\nconst cjkANS = /([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])([A-Za-z0-9`\\$%\\^&\\*\\-=\\+\\\\\\|/@\\u00a1-\\u00ff\\u2022\\u2027\\u2150-\\u218f])/g;\nconst ansCJK = /([A-Za-z0-9`~\\$%\\^&\\*\\-=\\+\\\\\\|/!;:,\\.\\?\\u00a1-\\u00ff\\u2022\\u2026\\u2027\\u2150-\\u218f])([\\u2e80-\\u2eff\\u2f00-\\u2fdf\\u3040-\\u309f\\u30a0-\\u30ff\\u3100-\\u312f\\u3200-\\u32ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff])/g;\n\nclass Pangu {\n\n  spacing(text) {\n    let newText = text;\n\n    newText = newText.replace(cjkQuote, '$1 $2');\n    newText = newText.replace(quoteCJK, '$1 $2');\n    newText = newText.replace(fixQuote, '$1$3$5');\n    newText = newText.replace(fixSingleQuote, '$1$3$4');\n\n    newText = newText.replace(hashANSCJKhash, '$1 $2$3$4 $5');\n    newText = newText.replace(cjkHash, '$1 $2');\n    newText = newText.replace(hashCJK, '$1 $3');\n\n    newText = newText.replace(cjkOperatorANS, '$1 $2 $3');\n    newText = newText.replace(ansOperatorCJK, '$1 $2 $3');\n\n    const oldText = newText;\n    const tmpText = newText.replace(cjkBracketCJK, '$1 $2 $4');\n    newText = tmpText;\n    if (oldText === tmpText) {\n      newText = newText.replace(cjkBracket, '$1 $2');\n      newText = newText.replace(bracketCJK, '$1 $2');\n    }\n    newText = newText.replace(fixBracket, '$1$3$5');\n\n    newText = newText.replace(fixSymbol, '$1$2 $3');\n\n    newText = newText.replace(cjkANS, '$1 $2');\n    newText = newText.replace(ansCJK, '$1 $2');\n\n    return newText;\n  }\n\n  spacingText(text, callback = () => {}) {\n    try {\n      const newText = this.spacing(text);\n      callback(null, newText);\n    } catch (err) {\n      callback(err);\n    }\n  }\n\n}\n\nconst pangu = new Pangu();\n\nexports = module.exports = pangu;\nexports.Pangu = Pangu;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shared/core.js\n **/","import CharacterCorrector from './correctors/CharacterCorrector';\nimport ICorrector from './correctors/Interfaces/ICorrector';\nimport ProperNounsCorrector from './correctors/ProperNounsCorrector';\nimport SpaceCorrector from './correctors/SpaceCorrector';\nimport UnitOfMeasurementCorrector from './correctors/UnitOfMeasurementCorrector';\n\nexport class CopyWritingCorrectService {\n  protected corrects: ICorrector[] = [\n    CharacterCorrector,\n    SpaceCorrector,\n    UnitOfMeasurementCorrector,\n    ProperNounsCorrector,\n  ];\n\n  public addCorrectors(correctors: ICorrector | ICorrector[]) {\n    this.corrects = this.corrects.concat(correctors);\n  }\n\n  public resetCorrectors(correctors: ICorrector[]) {\n    this.corrects = correctors;\n  }\n\n  public correct(text: string, rules?: {\n    [key: string]: {\n      [key: string]: any,\n    },\n  }): string {\n    for (const corrector of this.corrects) {\n      const correctorRules: {\n        [key: string]: {\n          [key: string]: any,\n        },\n      } = {};\n      if (typeof rules === 'object') {\n        for (const rule in corrector.rules) {\n          if (rules[rule]) {\n            correctorRules[rule] = rules[rule];\n          }\n        }\n      }\n      text = corrector.handle(text, correctorRules);\n    }\n    return text;\n  }\n}\n"],"sourceRoot":""}